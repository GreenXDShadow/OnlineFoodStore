<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Add Product</title>
  <!-- icon library and stylesheet reference -->
  <link href="{{ url_for('static', filename='css/upload.css') }}" rel="stylesheet" type="text/css" />
  <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
</head>

<body>
  <div class="overlay"></div>
  <div class="topnav">
    <a href="{{ url_for('index') }}"><i class="fa fa-fw fa-home"></i> Home</a>
    <form>
      <input class="searchbar" type="search" placeholder="search for products <3">
    </form>
    <div class="imageRight">
      <button class="user-icon-btn" onclick="toggleDropdown()">
        <img src="{{ url_for('static', filename='Icons/user.png')}}" alt="user" class="user-icon" width="27px"
          height="27px">
    </div></button>
    <div class="dropdown-content hidden" id="myDropdown">
      <button class="user-icon-btn" onclick="toggleDropdown()"><i class="fa fa-times fa-xs fa-fw imageRight"
          style="font-size: 2em;"></i></button>
      <h2>ACCOUNT</h2>
      <div id="oneline">
        <h4>Register</h4>
        <button id="loginButton" class="user-icon-btn" onclick=registrationPopUp()>
          <img class="arrow-level" src="{{ url_for('static', filename='Icons/down.png')}}" alt="downarrow" width="20px"
            height="20px">
        </button>
      </div>
      <div class="form-popup" id="register">
        <form action="/api/addUser" method="post" class="form-container" id="popUpForm">
          <h2>Registration</h2>
          <div class="input-container">
          <i class="fa fa-fw fa-user"></i>
          <input type="text" id="userName" name="name" placeholder="Username">
          </div>
          <div class="input-container">
          <i class="fa fa-fw fa-lock"></i>
          <input type="password" id="passWord" name="password" placeholder="Password">
          </div>
          <div class="input-container">
          <i class="fa fa-fw fa-lock"></i>
          <input type="password" id="confirmPassWord" name="confirm_password" placeholder="Confirm Password">
          </div>
          <div class="input-container">
          <i class="fa fa-fw fa-envelope"></i>
          <input type="email" id="email" name="email" placeholder="Email Address">
          </div>
          <br>
          <input type="submit" value="Submit">
        </form>
      </div>
      <div id="oneline">
        <h4>Log In</h4>
        <button id="loginButton" class="user-icon-btn" onclick=loginPopUp()>
          <img class="arrow-level" src="{{ url_for('static', filename='Icons/down.png')}}" alt="downarrow" width="20px"
            height="20px">
        </button>
      </div>
      <div class="form-popup" id="login">
        <form action="example.com/path" class="form-container" id="popUpForm">
          <h2>Log In</h2>
          <div class="input-container">
          <i class="fa fa-fw fa-user"></i>
          <input type="text" id="userName" placeholder="Username">
        </div>
        <div class="input-container">
          <i class="fa fa-fw fa-lock"></i>
          <input type="password" id="passWord" placeholder="Password">
          </div>
          <br>
            <input type="submit" value="Submit">
        </form>
      </div>
      <a href="{{ url_for('adminlogin') }}">
        <h4>Admin Login</h4>
      </a>
      <a href="{{ url_for('userlogin') }}">
        <h4>User Login</h4>
      </a>
    </div>
    <button class="cart-icon-btn" onclick="window.location.href = '{{ url_for('cart') }}';">
      <img src="{{ url_for('static', filename='Icons/cart.png')}}" alt="user" class="user-icon" width="27px"
        height="27px">
  </div></button>
  </div>
  </div>
  <div class="bottomnav">
    <ul>
      <li><a href="{{ url_for('categories') }}">Select Category</a></li>
      <li><a href="#">New Products</a></li>
      <li><a href="{{ url_for('featured') }}">Featured Products</a></li>
      <li><a href="{{ url_for('contact') }}">Contact Us</a></li>
    </ul>
  </div>

  <form method="post" action="/upload" enctype="multipart/form-data" id="uploadForm">
    <div class="file-upload">
      <input class="file-upload__input" type="file" name="myFile[]" id="myFile" multiple>
      <button class="file-upload__button" type="submit">Choose File(s)</button>
      <span class="file-upload__label"></span>
    </div>
</form>

  <div>
        <h2>Add New Product</h2>
        <form method="POST" action="{{ url_for('add_product') }}" enctype="multipart/form-data">
            <div>
                <label for="name">Product Name:</label>
                <input type="text" id="name" name="name" placeholder="Product Name" required>
            </div>
            <div>
                <label for="price">Price:</label>
                <input type="number" id="price" step="any" name="price" placeholder="Price" required>
            </div>
            <div>
                <label for="weight">Weight:</label>
                <input type="number" id="weight" step="any" name="weight" placeholder="Weight">
            </div>
            <div>
                <label for="type">Type:</label>
                <input type="text" id="type" name="type" placeholder="Type">
            </div>
            <div>
                <label for="category">Category:</label>
                <input type="text" id="category" name="category" placeholder="Category">
            </div>
            <div>
                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" name="quantity" placeholder="Quantity">
            </div>
            <div>
                <label for="amount">Amount:</label>
                <input type="number" id="amount" step="any" name="amount" placeholder="Amount">
            </div>
            <div>
                <label for="imagePath">Product Image:</label>
                <input type="file" id="imagePath" name="imagePath">
            </div>
            <div>
                <input type="submit" value="Add Product">
            </div>
        </form>
    </div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
    Array.prototype.forEach.call(
        document.querySelectorAll(".file-upload__button"),
        function(button) {
        const hiddenInput = button.parentElement.querySelector(
            ".file-upload__input"
        );
        const label = button.parentElement.querySelector(".file-upload__label");
        const defaultLabelText = "No file(s) selected";

        // Set default text for label
        label.textContent = defaultLabelText;
        label.title = defaultLabelText;

        button.addEventListener("click", function() {
            hiddenInput.click();
        });

        hiddenInput.addEventListener("change", function() {
            const filenameList = Array.prototype.map.call(hiddenInput.files, function(
            file
            ) {
            return file.name;
            });

            label.textContent = filenameList.join(", ") || defaultLabelText;
            label.title = label.textContent;

            // Submit the form when a file is selected
            document.getElementById("uploadForm").submit();
        });
        }
    );
    });
    document.addEventListener("DOMContentLoaded", function () {
    const uploadForm = document.getElementById("uploadForm");
    const fileInput = document.getElementById("myFile");
    const label = document.querySelector(".file-upload__label");
    const defaultLabelText = "No file(s) selected";

    // Set default text for label
    label.textContent = defaultLabelText;
    label.title = defaultLabelText;

    fileInput.addEventListener("change", function () {
    const filenameList = Array.from(fileInput.files).map(function (file) {
        return file.name;
    });

    label.textContent = filenameList.join(", ") || defaultLabelText;
    label.title = label.textContent;
    });

    uploadForm.addEventListener("submit", function (event) {
    event.preventDefault(); // Prevent the form from submitting normally

    // You can add additional logic here to handle the file upload
    fetch('/upload', {
        method: 'POST',
        body: new FormData(uploadForm),
    })
    .then(response => response.text())
    .then(message => {
        alert(message); // Display an alert with the server's response
        // Optionally, you can redirect the user to another page
        // window.location.href = '/success'; // Change '/success' to the desired success page
    })
    .catch(error => {
        console.error('Error:', error);
        alert('File upload failed. Please try again.'); // Display an error message
    });
    });
});
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script src="{{ url_for('static', filename='js/ajaxScript.js') }}"></script>



  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    
</body>

</html>